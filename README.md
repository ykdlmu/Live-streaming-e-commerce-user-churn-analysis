# Live-streaming-e-commerce-user-churn-analysis
# 一、背景以及分析目的
>>在今天产品高度同质化的品牌营销阶段，企业与企业之间的竞争集中地体现在对客户的争夺上。“用户就是上帝”促使众多的企业不惜代价去争夺尽可能多的客户。但是企业在不惜代价发展新用户的过程中，往往会忽视或无暇顾及已有客户的流失情况，结果就导致出现这样一种窘况：一边是新客户在源源不断地增加，而另一方面是辛辛苦苦找来的客户却在悄然无声地流失。用户流失分析主要是通过分析用户特征，寻找对用户流失影响较大的用户特征，根据电商领域业务知识，提出产品/平台的运营建议，从而提高用户粘性，降低用户流失率。
# 二、分析思路及分析工具
## 2.1分析思路
![image](https://github.com/ykdlmu/Live-streaming-e-commerce-user-churn-analysis/assets/146841770/ed7841ca-c8e9-4479-9cfb-788b09a47996)
## 2.2分析工具
可视化工具：Power BI  -- 一款微软旗下的免费可视化工具，有着强大的开发者社区，多元可视化工具<BR>
分析工具： Python,excel
# 三、数据预处理
绝大多数情况下，建立模型需要一个完整的数据集，包含空值的数据会使数据挖掘过程陷入混乱，导致不可靠的输出，我们处理缺失值是为了更好地进行建模，因此，在具体实现之前，此步骤也可以放到模型建立之前，先用原始数据进行特征分析。<br>
缺失值处理是对数据中的空值进行删除或者填充，简单的处理方法有直接删除、均值填充、中位数填充、众数填充和特殊值填充，更复杂的有插值填充、Knn均值填充等，这里不进行介绍。常用的缺失值处理方法如下：
    <div align=center><img src="https://github.com/ykdlmu/Live-streaming-e-commerce-user-churn-analysis/assets/146841770/7e7a4333-67a0-4caf-8005-79e7217013c5" width="800" height="300" /></div><br>
   排序后，如有缺失值，会出现在预览区的第一条数据中。观察到需要进行缺失值填充的字段有：使用平台的时间、仓库到顾客地址的距离、使用APP时间、上月订单数量、订单数较去年增加、上月使用的优惠券数量、距上次下单天数。 具体的缺失值处理如下：
<div align=center><img src="https://github.com/ykdlmu/Live-streaming-e-commerce-user-churn-analysis/assets/146841770/3d46f6db-f696-4ac6-9ce8-24d4b51c4498" /></div>

# 四、用户维度特征分析
（1）城市等级分析
![image](https://github.com/ykdlmu/Live-streaming-e-commerce-user-churn-analysis/assets/146841770/05ffc67a-9ae3-40d6-b134-652f681a51fb)
 读图：城市等级为3的流失用户占比为21.4%，城市等级为2的流失用户占比为19.8%,远高于城市等级为1的14.5%

       解图：建议运营团队在城市等级为2和3的城市适当开展运营活动，围绕2，3等级的城市受众设置会员产品，提高用户粘性
（2）性别分析
  <div align=center><img src="https://github.com/ykdlmu/Live-streaming-e-commerce-user-churn-analysis/assets/146841770/67ffe11f-5b27-4c2d-a45e-702295a0e3e3"></div><br>
读图：女性用户是平台的主要用户，女性的流失用户占比为17.7%，男性的流失用户占比为15.5%，基本持平

       解图：建议运营团队根据男性与女性喜欢的直播风格，进行直播内容定向推送，尝试降低其流失率
（3）年龄分析
![image](https://github.com/ykdlmu/Live-streaming-e-commerce-user-churn-analysis/assets/146841770/22ee70a8-f0b7-4fb0-94d8-6cf598e02374)
读图：年龄分组为6的流失用户占比最高，为34.6%，其次是年龄分组为5，流失用户占比为22.5%，另外年龄组别4是最大的受众群体，即使在流失用户占比中排第三位也依旧不能忽视

       解图：建议运营团队鼓励更多年龄分组4，5和6喜欢的直播内容和商品进驻，提高其留存率
 （4）婚姻状况分析
![image](https://github.com/ykdlmu/Live-streaming-e-commerce-user-churn-analysis/assets/146841770/891cd227-ba0c-4315-ab3a-d124ac3fddf5)
    读图：已婚的总用户数最多，且流失用户占比最低，是产品的优质用户群，单身的流失用户占比较高，为26.7%，远高于离异和已婚的用户

       解图：建议运营团队在挖掘新用户时，更注意去吸引已婚的用户，对于现有的单身用户，采取积极留存措施

 （5）上月首选订单类型分析
 ![image](https://github.com/ykdlmu/Live-streaming-e-commerce-user-churn-analysis/assets/146841770/df0d4852-e716-4612-8f86-24ddd858120e)
读图：上月主要订单为Mobile Phone和Household的流失用户占比较多，均超过了25%，其次是上月订单为Fashion的用户

       解图：可能是由于Mobile Phone和Household的商品使用周期较长，用户购买该类商品后，很长一段时间不再有相同的购买意愿，从而造成用户流失
  # 五、利用python进行用户特征相关性分析
  ## 5.1生成哑变量
哑变量也叫虚拟变量，引入哑变量的目的是将不能定量处理的变量（如性别、职业等）量化，以性别为例，如果将女性和男性设置为1和2，代入到模型中是不太合理的，因为女性和男性没有大小和顺序关系。特别在回归模型中，生成哑变量后，每个哑变量都能计算得到对应得回归系数，更容易解读模型的结果。<br>
    ![image](https://github.com/ykdlmu/Live-streaming-e-commerce-user-churn-analysis/assets/146841770/01de8387-3274-41d6-9409-e190d9b1096a)
  ## 5.2计算相关系数
  用户流失标签的相关系数绝对值越大，与用户流失相关程度越高；>0.7为强相关，<0.3为弱相关，相关系数为正，与用户流失为正相关，否则，为负相关。
![image](https://github.com/ykdlmu/Live-streaming-e-commerce-user-churn-analysis/assets/146841770/dbe4e21c-9e5b-41e4-b8d3-80380a0dcf1b)
 分析结论如下：

使用平台时间_月相关系数为-0.32，因此，使用平台时间越短，用户越有可能流失
上月投诉次数相关系数为0.25，因此，上月投诉次数越多，用户越有可能流失
婚姻状况_Single相关系数为0.18，因此，单身用户越有可能流失
距上次下单天数_天相关系数为-0.16，因此，距上次下单天数越近，用户已经买到了心仪的物品，越有可能流失
上月客户的首选订单类别_Mobile Phone相关系数为0.15，因此，用户上次的首选订单类别为Mobile Phone的，越有可能流失
# 六、模型建立与评估
## 6.1模型建立与评估
对数据进行缺失值处理和生成哑变量后，就可以建立机器学习模型，对数据进行挖掘分析。

       常用的单模型有：逻辑回归模型、决策树模型、朴素贝叶斯模型、K近邻算法等，融合的多模型有：随机森林模型、AdaBoost模型、GBDT模型、LightGBM模型等。

       机器学习模型效果的主要评估方法有：准确率、精确率与召回率、混淆矩阵、ROC和AUC等。本文使用ROC得分来评估机器学习模型的效果，ROC得分越高，机器学习模型的效果越好。
       各模型在默认参数下的ROC得分整理成Excel文件，导入PowerBI进行分析。
<div align=center><img src="https://github.com/ykdlmu/Live-streaming-e-commerce-user-churn-analysis/assets/146841770/647edf1f-1377-47e1-862e-18e597a9defb)"></div><br><br>
分析结果如下：

LightGBM算法的学习效果最好，ROC得分为0.983，其次为GBDT模型，ROC得分为0.929
整体上看，融合的多模型ROC得分比单模型算法高，学习效果比单模型好
## 6.2模型优化
模型优化是个枯燥且需要耐心的过程，主要是寻找最优的模型参数，使得模型的准确度最高。这里用最常用且简便的GridSearch网格搜索寻找模型的最优参数。

       GridSearch网格搜索是一种穷举搜索的参数调优手段，通过遍历所有的候选参数，循环建立模型并评估模型的有效性和准确性，选取最好的参数作为最终结果。

（1）模型优化步骤如下（python代码见附件）：
选择学习效果最好的LightGBM模型，通过GridSearch网格搜索，找到其最优的模型参数。
使用最优的模型参数，建立LightGBM机器学习模型，计算器ROC得分，并输出最优模型参数下的特征及特征重要度。<br>
(2）对优化后的模型结果进行分析如下：
参数调优后的算法ROC得分比调优前的高,由0.983提高到了0.988,
根据参数调优的LightGBM模型，对用户流失影响最大的用户特征依次为：上月平均折扣金额、仓库到顾客地址的距离、订单数量较去年增加、使用平台时间和满意度评分，上述的用户行为特征与相关系数分析的略有差异，整体来说与探索性分析结果基本一致。<br>
（3）根据分析结果，得出`平台运营建议`如下：
>>适当开展补贴活动，鼓励商家对消费者进行补贴；<br>
增加发货仓库，降低商品的运输时间；<br>
鼓励更多主播创造更多优质直播内容，鼓励用户收藏喜欢的主播，鼓励用户成为主播；<br>
适当开展签到、每日任务等活动，提高用户使用平台时间，增强用户粘性；<br>
对于长时间未下单的用户，平台对其进行精准消息推送，尝试召回用户<br>
# 七、案例价值
（1）简单化日常工作，半自动化生成可视化看板。本案例形成了数据上传、数据处理、数据可视化生成的半自动化闭环系统，提高制作可视化分析看板的效率超过60%。用户更新数据重新制作可视化看板只需要三步：

       Step1：把原始的EXCEL数据集替换为新的数据，然后导出自助数据集处理好的EXCEL文件存到python程序对应的文件路径下。

       Step2：跑一遍python程序，将python生成的结果文件替换掉PowerBI中的文件（看板数据同步更新）

       Step3：根据新的数据，微调可视化看板的结论。

       当然，只能“半自动化”是因为案例使用了两种工具，如果能只用一种工具实现全流程，工作流程将更加简化。

（2）数据可视化与数据挖掘结合，分析更深入。取两者之长处，用PowerBI进行用户特征展示，用python进行相关系数分析、模型建立和优化，输出对应模型结果，最终由PowerBI整合形成可视化分析报告，更准确、深入地得出相应的业务问题结论，快速进行决策。
